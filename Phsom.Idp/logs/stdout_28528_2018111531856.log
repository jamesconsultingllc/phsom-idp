info: Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager[0]
      User profile is available. Using 'C:\Users\rudyj\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
Hosting environment: Development
Content root path: D:\phsom\phsom-identity-server\Phsom.Idp
Now listening on: http://127.0.0.1:40331
Application started. Press Ctrl+C to shut down.
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 DEBUG http://localhost:44352/  0
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 DEBUG http://localhost:44352/  0
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 995.1562ms 200 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 995.1562ms 200 
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Index", controller = "Home"}. Executing action IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Index", controller = "Home"}. Executing action IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.0723ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.ViewResult in 1.0723ms.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[1]
      Executing ViewResult, running view Index.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[1]
      Executing ViewResult, running view Index.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[4]
      Executed ViewResult - view Index executed in 112.1619ms.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[4]
      Executed ViewResult - view Index executed in 112.1619ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp) in 609.0602ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp) in 609.0602ms
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2390.3085ms 200 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2390.3085ms 200 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/css/site.css  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/icon.png  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/lib/bootstrap/css/bootstrap.css  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/icon.png  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/css/site.css  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/lib/bootstrap/js/bootstrap.js  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/lib/bootstrap/css/bootstrap.css  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/lib/bootstrap/js/bootstrap.js  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/icon.jpg  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/lib/jquery/jquery.js  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/icon.jpg  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/lib/jquery/jquery.js  
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/css/site.css'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\css\site.css'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/css/site.css'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\css\site.css'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/icon.jpg'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\icon.jpg'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/icon.jpg'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\icon.jpg'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/lib/bootstrap/js/bootstrap.js'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\lib\bootstrap\js\bootstrap.js'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/lib/bootstrap/js/bootstrap.js'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\lib\bootstrap\js\bootstrap.js'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/icon.png'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\icon.png'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/icon.png'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\icon.png'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/lib/jquery/jquery.js'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\lib\jquery\jquery.js'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/lib/jquery/jquery.js'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\lib\jquery\jquery.js'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/lib/bootstrap/css/bootstrap.css'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\lib\bootstrap\css\bootstrap.css'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/lib/bootstrap/css/bootstrap.css'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\lib\bootstrap\css\bootstrap.css'
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 106.9826ms 200 image/jpeg
infoinfo: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 106.9826ms 200 image/jpeg
: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 188.9483ms 200 image/png
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 119.1993ms 200 application/javascript
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 106.0353ms 200 application/javascript
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 188.9483ms 200 image/png
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 188.9297ms 200 text/css
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 119.1993ms 200 application/javascript
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 187.4193ms 200 text/css
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 188.9297ms 200 text/css
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 187.4193ms 200 text/css
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 106.0353ms 200 application/javascript
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
      An error occurred using the connection to database 'Phsom_DEV' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
      An error occurred using the connection to database 'Phsom_DEV' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
         at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
         at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
         at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
         at System.Data.SqlClient.SqlConnection.Open()
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
         at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
         at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
      ClientConnectionId:00000000-0000-0000-0000-000000000000
      Error Number:2,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
         at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
         at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
         at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
         at System.Data.SqlClient.SqlConnection.Open()
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
         at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
         at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
      ClientConnectionId:00000000-0000-0000-0000-000000000000
      Error Number:2,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: IdentityServer4.EntityFramework.TokenCleanup[0]
      Exception clearing tokens: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
fail: IdentityServer4.EntityFramework.TokenCleanup[0]
      Exception clearing tokens: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/swagger/index.html  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/swagger/index.html  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 53.2915ms 200 text/html
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 53.2915ms 200 text/html
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/swagger/swagger-ui.css  
infoinfo: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/swagger/swagger-ui.css  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/swagger/swagger-ui-bundle.js  
: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/swagger/swagger-ui-bundle.js  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/swagger/swagger-ui-standalone-preset.js  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/swagger/swagger-ui-standalone-preset.js  
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 99.2531ms 200 text/css
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 99.2531ms 200 text/css
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 94.0516ms 200 application/javascript
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 94.0516ms 200 application/javascript
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 134.6434ms 200 application/javascript
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 134.6434ms 200 application/javascript
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/swagger/swagger-ui-bundle.js.map  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/swagger/swagger-ui-bundle.js.map  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/swagger/swagger-ui-standalone-preset.js.map  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/swagger/swagger-ui-standalone-preset.js.map  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/swagger/v1/swagger.json  
infoinfo: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/swagger-ui-standalone-preset.js.map'. Physical path: 'N/A'
: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/swagger/v1/swagger.json  
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/swagger-ui-standalone-preset.js.map'. Physical path: 'N/A'
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 110.3203ms 200 text/plain
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 110.3203ms 200 text/plain
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/swagger-ui-bundle.js.map'. Physical path: 'N/A'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/swagger-ui-bundle.js.map'. Physical path: 'N/A'
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 643.3986ms 200 text/plain
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 643.3986ms 200 text/plain
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 927.8498ms 200 application/json;charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 927.8498ms 200 application/json;charset=utf-8
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/api/Users/rjames  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/api/Users/rjames  
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "GetByUserName", controller = "Users"}. Executing action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "GetByUserName", controller = "Users"}. Executing action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) with arguments (rjames) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) with arguments (rjames) - Validation state: Valid
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/api/Users/rjames  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/api/Users/rjames  
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "GetByUserName", controller = "Users"}. Executing action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "GetByUserName", controller = "Users"}. Executing action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) with arguments (rjames) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) with arguments (rjames) - Validation state: Valid
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
      An error occurred using the connection to database 'Phsom_DEV' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
      An error occurred using the connection to database 'Phsom_DEV' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
      An error occurred using the connection to database 'Phsom_DEV' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
      An error occurred using the connection to database 'Phsom_DEV' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
      An error occurred using the connection to database 'Phsom_DEV' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
      An error occurred using the connection to database 'Phsom_DEV' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
         at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
         at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
         at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
         at System.Data.SqlClient.SqlConnection.Open()
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
         at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
         at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
      ClientConnectionId:00000000-0000-0000-0000-000000000000
      Error Number:2,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
         at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
         at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
         at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
         at System.Data.SqlClient.SqlConnection.Open()
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
         at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
         at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
      ClientConnectionId:00000000-0000-0000-0000-000000000000
      Error Number:2,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: IdentityServer4.EntityFramework.TokenCleanup[0]
      Exception clearing tokens: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
fail: IdentityServer4.EntityFramework.TokenCleanup[0]
      Exception clearing tokens: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'Phsom.Idp.Data.ApplicationDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
      --- End of stack trace from previous location where exception was thrown ---
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
      ClientConnectionId:00000000-0000-0000-0000-000000000000
      Error Number:2,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'Phsom.Idp.Data.ApplicationDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
      --- End of stack trace from previous location where exception was thrown ---
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
      ClientConnectionId:00000000-0000-0000-0000-000000000000
      Error Number:2,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'Phsom.Idp.Data.ApplicationDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
      --- End of stack trace from previous location where exception was thrown ---
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
      ClientConnectionId:00000000-0000-0000-0000-000000000000
      Error Number:2,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'Phsom.Idp.Data.ApplicationDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
      --- End of stack trace from previous location where exception was thrown ---
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
      ClientConnectionId:00000000-0000-0000-0000-000000000000
      Error Number:2,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'Phsom.Idp.Data.ApplicationDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
      --- End of stack trace from previous location where exception was thrown ---
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
      ClientConnectionId:00000000-0000-0000-0000-000000000000
      Error Number:2,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'Phsom.Idp.Data.ApplicationDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
      --- End of stack trace from previous location where exception was thrown ---
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
      ClientConnectionId:00000000-0000-0000-0000-000000000000
      Error Number:2,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'Phsom.Idp.Data.ApplicationDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
      --- End of stack trace from previous location where exception was thrown ---
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
      ClientConnectionId:00000000-0000-0000-0000-000000000000
      Error Number:2,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'Phsom.Idp.Data.ApplicationDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
      --- End of stack trace from previous location where exception was thrown ---
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
      ClientConnectionId:00000000-0000-0000-0000-000000000000
      Error Number:2,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) in 18678.1959ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) in 6385.1971ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) in 18678.1959ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) in 6385.1971ms
fail: Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware[7]
      An exception occurred while calculating the database error page content. Skipping display of the database error page.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware[7]
      An exception occurred while calculating the database error page content. Skipping display of the database error page.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware[7]
      An exception occurred while calculating the database error page content. Skipping display of the database error page.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware[7]
      An exception occurred while calculating the database error page content. Skipping display of the database error page.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[1]
      An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at Phsom.Idp.Controllers.UsersController.GetByUserName(String userName) in D:\Phsom\phsom-identity-server\Phsom.Idp\Controllers\UsersController.cs:line 88
   at lambda_method(Closure , Object )
   at Microsoft.Extensions.Internal.ObjectMethodExecutorAwaitable.Awaiter.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[1]
      An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at Phsom.Idp.Controllers.UsersController.GetByUserName(String userName) in D:\Phsom\phsom-identity-server\Phsom.Idp\Controllers\UsersController.cs:line 88
   at lambda_method(Closure , Object )
   at Microsoft.Extensions.Internal.ObjectMethodExecutorAwaitable.Awaiter.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[1]
      An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at Phsom.Idp.Controllers.UsersController.GetByUserName(String userName) in D:\Phsom\phsom-identity-server\Phsom.Idp\Controllers\UsersController.cs:line 88
   at lambda_method(Closure , Object )
   at Microsoft.Extensions.Internal.ObjectMethodExecutorAwaitable.Awaiter.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[1]
      An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) ---> System.ComponentModel.Win32Exception (2): The system cannot find the file specified
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at Phsom.Idp.Controllers.UsersController.GetByUserName(String userName) in D:\Phsom\phsom-identity-server\Phsom.Idp\Controllers\UsersController.cs:line 88
   at lambda_method(Closure , Object )
   at Microsoft.Extensions.Internal.ObjectMethodExecutorAwaitable.Awaiter.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 15642.2681ms 500 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 27954.9372ms 500 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 27954.9372ms 500 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 15642.2681ms 500 text/html; charset=utf-8
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/api/Users/rjames  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/api/Users/rjames  
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "GetByUserName", controller = "Users"}. Executing action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "GetByUserName", controller = "Users"}. Executing action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) with arguments (rjames) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) with arguments (rjames) - Validation state: Valid
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
      An error occurred using the connection to database 'Phsom_DEV' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
      An error occurred using the connection to database 'Phsom_DEV' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
      An error occurred using the connection to database 'Phsom_DEV' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
      An error occurred using the connection to database 'Phsom_DEV' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
         at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
         at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
         at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
         at System.Data.SqlClient.SqlConnection.Open()
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
         at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
         at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
      ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
      Error Number:258,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
         at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
         at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
         at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
         at System.Data.SqlClient.SqlConnection.Open()
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
         at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
         at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
      ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
      Error Number:258,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: IdentityServer4.EntityFramework.TokenCleanup[0]
      Exception clearing tokens: A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)
fail: IdentityServer4.EntityFramework.TokenCleanup[0]
      Exception clearing tokens: A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.)
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'Phsom.Idp.Data.ApplicationDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
      --- End of stack trace from previous location where exception was thrown ---
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
      ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
      Error Number:258,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'Phsom.Idp.Data.ApplicationDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
      --- End of stack trace from previous location where exception was thrown ---
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
      ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
      Error Number:258,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'Phsom.Idp.Data.ApplicationDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
      --- End of stack trace from previous location where exception was thrown ---
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
      ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
      Error Number:258,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'Phsom.Idp.Data.ApplicationDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
      --- End of stack trace from previous location where exception was thrown ---
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
      ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
      Error Number:258,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) in 6073.9643ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) in 6073.9643ms
fail: Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware[7]
      An exception occurred while calculating the database error page content. Skipping display of the database error page.
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware[7]
      An exception occurred while calculating the database error page content. Skipping display of the database error page.
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[1]
      An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at Phsom.Idp.Controllers.UsersController.GetByUserName(String userName) in D:\Phsom\phsom-identity-server\Phsom.Idp\Controllers\UsersController.cs:line 88
   at lambda_method(Closure , Object )
   at Microsoft.Extensions.Internal.ObjectMethodExecutorAwaitable.Awaiter.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[1]
      An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at Phsom.Idp.Controllers.UsersController.GetByUserName(String userName) in D:\Phsom\phsom-identity-server\Phsom.Idp\Controllers\UsersController.cs:line 88
   at lambda_method(Closure , Object )
   at Microsoft.Extensions.Internal.ObjectMethodExecutorAwaitable.Awaiter.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 10068.0506ms 500 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 10068.0506ms 500 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/api/Users/rjames  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/api/Users/rjames  
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "GetByUserName", controller = "Users"}. Executing action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "GetByUserName", controller = "Users"}. Executing action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) with arguments (rjames) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) with arguments (rjames) - Validation state: Valid
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
      An error occurred using the connection to database 'Phsom_DEV' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Database.Connection[20004]
      An error occurred using the connection to database 'Phsom_DEV' on server '.'.
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'Phsom.Idp.Data.ApplicationDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
         at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
      --- End of stack trace from previous location where exception was thrown ---
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
      ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
      Error Number:258,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'Phsom.Idp.Data.ApplicationDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
         at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
      --- End of stack trace from previous location where exception was thrown ---
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
      ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
      Error Number:258,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'Phsom.Idp.Data.ApplicationDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
         at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
      --- End of stack trace from previous location where exception was thrown ---
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
      ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
      Error Number:258,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.EntityFrameworkCore.Query[10100]
      An exception occurred in the database while iterating the results of a query for context type 'Phsom.Idp.Data.ApplicationDbContext'.
      System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
         at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
         at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
         at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
      --- End of stack trace from previous location where exception was thrown ---
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
         at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
         at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
      ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
      Error Number:258,State:0,Class:20
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) in 2016.748ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) in 2016.748ms
fail: Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware[7]
      An exception occurred while calculating the database error page content. Skipping display of the database error page.
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware[7]
      An exception occurred while calculating the database error page content. Skipping display of the database error page.
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerDatabaseCreator.<>c__DisplayClass20_0.<<ExistsAsync>b__0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[1]
      An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at Phsom.Idp.Controllers.UsersController.GetByUserName(String userName) in D:\Phsom\phsom-identity-server\Phsom.Idp\Controllers\UsersController.cs:line 88
   at lambda_method(Closure , Object )
   at Microsoft.Extensions.Internal.ObjectMethodExecutorAwaitable.Awaiter.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
fail: Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware[1]
      An unhandled exception has occurred while executing the request.
System.Data.SqlClient.SqlException (0x80131904): A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) ---> System.ComponentModel.Win32Exception (258): The wait operation timed out
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.BufferlessMoveNext(DbContext _, Boolean buffer, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.FirstOrDefault_[TSource](IAsyncEnumerable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.MoveNext(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.MoveNextCore(CancellationToken cancellationToken)
   at System.Linq.AsyncEnumerable.AsyncIterator`1.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteSingletonAsyncQuery[TResult](QueryContext queryContext, Func`2 compiledQuery, IDiagnosticsLogger`1 logger, Type contextType)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at Phsom.Idp.Controllers.UsersController.GetByUserName(String userName) in D:\Phsom\phsom-identity-server\Phsom.Idp\Controllers\UsersController.cs:line 88
   at lambda_method(Closure , Object )
   at Microsoft.Extensions.Internal.ObjectMethodExecutorAwaitable.Awaiter.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:ce46ea34-d724-4e99-b69c-a035d469505a
Error Number:258,State:0,Class:20
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2998.4342ms 500 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2998.4342ms 500 text/html; charset=utf-8
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/api/Users/rjames  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/api/Users/rjames  
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "GetByUserName", controller = "Users"}. Executing action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "GetByUserName", controller = "Users"}. Executing action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) with arguments (rjames) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) with arguments (rjames) - Validation state: Valid
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (70ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
      FROM [AspNetUsers] AS [u]
      WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (70ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
      FROM [AspNetUsers] AS [u]
      WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (57ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
      FROM [AspNetUserClaims] AS [uc]
      WHERE [uc].[UserId] = @__user_Id_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (57ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
      FROM [AspNetUserClaims] AS [uc]
      WHERE [uc].[UserId] = @__user_Id_0
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1395.9727ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1395.9727ms.
info: Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor[1]
      Executing ObjectResult, writing value of type 'Phsom.Idp.Models.UserDto'.
info: Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor[1]
      Executing ObjectResult, writing value of type 'Phsom.Idp.Models.UserDto'.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) in 1448.0412ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action Phsom.Idp.Controllers.UsersController.GetByUserName (Phsom.Idp) in 1448.0412ms
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1465.4968ms 200 application/json; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1465.4968ms 200 application/json; charset=utf-8
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/  
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Index", controller = "Home"}. Executing action IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Index", controller = "Home"}. Executing action IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.1086ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.1086ms.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[1]
      Executing ViewResult, running view Index.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[1]
      Executing ViewResult, running view Index.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[4]
      Executed ViewResult - view Index executed in 5.8673ms.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[4]
      Executed ViewResult - view Index executed in 5.8673ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp) in 49.0315ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp) in 49.0315ms
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 63.9013ms 200 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 63.9013ms 200 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/grants  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/grants  
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Index", controller = "Grants"}. Executing action IdentityServer4.Quickstart.UI.GrantsController.Index (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Index", controller = "Grants"}. Executing action IdentityServer4.Quickstart.UI.GrantsController.Index (Phsom.Idp)
info: Microsoft.AspNetCore.Authorization.DefaultAuthorizationService[2]
      Authorization failed.
info: Microsoft.AspNetCore.Authorization.DefaultAuthorizationService[2]
      Authorization failed.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[3]
      Authorization failed for the request at filter 'Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter'.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[3]
      Authorization failed for the request at filter 'Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter'.
info: Microsoft.AspNetCore.Mvc.ChallengeResult[1]
      Executing ChallengeResult with authentication schemes ().
info: Microsoft.AspNetCore.Mvc.ChallengeResult[1]
      Executing ChallengeResult with authentication schemes ().
info: Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler[12]
      AuthenticationScheme: Identity.Application was challenged.
info: Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler[12]
      AuthenticationScheme: Identity.Application was challenged.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.GrantsController.Index (Phsom.Idp) in 33.2836ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.GrantsController.Index (Phsom.Idp) in 33.2836ms
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 55.0736ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 55.0736ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/account/login?returnUrl=%2Fgrants  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/account/login?returnUrl=%2Fgrants  
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Login", controller = "Account"}. Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Login", controller = "Account"}. Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) with arguments (/grants) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) with arguments (/grants) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.ViewResult in 12.9177ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.ViewResult in 12.9177ms.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[1]
      Executing ViewResult, running view Login.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[1]
      Executing ViewResult, running view Login.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[4]
      Executed ViewResult - view Login executed in 82.9487ms.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[4]
      Executed ViewResult - view Login executed in 82.9487ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) in 138.1142ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) in 138.1142ms
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 154.7383ms 200 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 154.7383ms 200 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 POST http://localhost:44352/account/login?returnUrl=%2Fgrants application/x-www-form-urlencoded 265
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 POST http://localhost:44352/account/login?returnUrl=%2Fgrants application/x-www-form-urlencoded 265
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Login", controller = "Account"}. Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Login", controller = "Account"}. Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) with arguments (IdentityServer4.Quickstart.UI.LoginInputModel, login) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) with arguments (IdentityServer4.Quickstart.UI.LoginInputModel, login) - Validation state: Valid
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (45ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
      FROM [AspNetUsers] AS [u]
      WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (45ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
      FROM [AspNetUsers] AS [u]
      WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (28ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
      FROM [AspNetUserClaims] AS [uc]
      WHERE [uc].[UserId] = @__user_Id_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (28ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
      FROM [AspNetUserClaims] AS [uc]
      WHERE [uc].[UserId] = @__user_Id_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [role].[Name]
      FROM [AspNetUserRoles] AS [userRole]
      INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
      WHERE [userRole].[UserId] = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [role].[Name]
      FROM [AspNetUserRoles] AS [userRole]
      INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
      WHERE [userRole].[UserId] = @__userId_0
info: Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler[10]
      AuthenticationScheme: Identity.Application signed in.
info: Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler[10]
      AuthenticationScheme: Identity.Application signed in.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (32ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
      FROM [AspNetUsers] AS [u]
      WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (32ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
      FROM [AspNetUsers] AS [u]
      WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
info: Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler[10]
      AuthenticationScheme: Identity.Application signed in.
info: Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler[10]
      AuthenticationScheme: Identity.Application signed in.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 786.8497ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 786.8497ms.
info: Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor[1]
      Executing RedirectResult, redirecting to /grants.
info: Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor[1]
      Executing RedirectResult, redirecting to /grants.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) in 857.7686ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) in 857.7686ms
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 879.6663ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 879.6663ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/grants  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/grants  
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Index", controller = "Grants"}. Executing action IdentityServer4.Quickstart.UI.GrantsController.Index (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Index", controller = "Grants"}. Executing action IdentityServer4.Quickstart.UI.GrantsController.Index (Phsom.Idp)
info: Microsoft.AspNetCore.Authorization.DefaultAuthorizationService[1]
      Authorization was successful.
info: Microsoft.AspNetCore.Authorization.DefaultAuthorizationService[1]
      Authorization was successful.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.GrantsController.Index (Phsom.Idp) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.GrantsController.Index (Phsom.Idp) - Validation state: Valid
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (38ms) [Parameters=[@__subjectId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[SubjectId] = @__subjectId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (38ms) [Parameters=[@__subjectId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[SubjectId] = @__subjectId_0
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.GrantsController.Index (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.ViewResult in 67.4485ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.GrantsController.Index (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.ViewResult in 67.4485ms.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[1]
      Executing ViewResult, running view Index.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[1]
      Executing ViewResult, running view Index.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[4]
      Executed ViewResult - view Index executed in 21.2563ms.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[4]
      Executed ViewResult - view Index executed in 21.2563ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.GrantsController.Index (Phsom.Idp) in 133.0967ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.GrantsController.Index (Phsom.Idp) in 133.0967ms
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 153.9933ms 200 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 153.9933ms 200 text/html; charset=utf-8
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/consent  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/consent  
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Index", controller = "Consent"}. Executing action IdentityServer4.Quickstart.UI.ConsentController.Index (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Index", controller = "Consent"}. Executing action IdentityServer4.Quickstart.UI.ConsentController.Index (Phsom.Idp)
info: Microsoft.AspNetCore.Authorization.DefaultAuthorizationService[1]
      Authorization was successful.
info: Microsoft.AspNetCore.Authorization.DefaultAuthorizationService[1]
      Authorization was successful.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.ConsentController.Index (Phsom.Idp) with arguments () - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.ConsentController.Index (Phsom.Idp) with arguments () - Validation state: Valid
fail: IdentityServer4.Quickstart.UI.ConsentController[0]
      No consent request matching request: (null)
fail: IdentityServer4.Quickstart.UI.ConsentController[0]
      No consent request matching request: (null)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.ConsentController.Index (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.ViewResult in 7.7731ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.ConsentController.Index (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.ViewResult in 7.7731ms.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[1]
      Executing ViewResult, running view Error.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[1]
      Executing ViewResult, running view Error.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[4]
      Executed ViewResult - view Error executed in 22.559ms.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[4]
      Executed ViewResult - view Error executed in 22.559ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.ConsentController.Index (Phsom.Idp) in 74.4672ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.ConsentController.Index (Phsom.Idp) in 74.4672ms
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 115.9124ms 200 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 115.9124ms 200 text/html; charset=utf-8
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/diagnostics  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/diagnostics  
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Index", controller = "Diagnostics"}. Executing action IdentityServer4.Quickstart.UI.DiagnosticsController.Index (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Index", controller = "Diagnostics"}. Executing action IdentityServer4.Quickstart.UI.DiagnosticsController.Index (Phsom.Idp)
info: Microsoft.AspNetCore.Authorization.DefaultAuthorizationService[1]
      Authorization was successful.
info: Microsoft.AspNetCore.Authorization.DefaultAuthorizationService[1]
      Authorization was successful.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.DiagnosticsController.Index (Phsom.Idp) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.DiagnosticsController.Index (Phsom.Idp) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.DiagnosticsController.Index (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.ViewResult in 2.5942ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.DiagnosticsController.Index (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.ViewResult in 2.5942ms.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[1]
      Executing ViewResult, running view Index.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[1]
      Executing ViewResult, running view Index.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[4]
      Executed ViewResult - view Index executed in 12.4301ms.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[4]
      Executed ViewResult - view Index executed in 12.4301ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.DiagnosticsController.Index (Phsom.Idp) in 59.8281ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.DiagnosticsController.Index (Phsom.Idp) in 59.8281ms
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 80.5336ms 200 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 80.5336ms 200 text/html; charset=utf-8
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/home  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/home  
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Index", controller = "Home"}. Executing action IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Index", controller = "Home"}. Executing action IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0206ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0206ms.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[1]
      Executing ViewResult, running view Index.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[1]
      Executing ViewResult, running view Index.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[4]
      Executed ViewResult - view Index executed in 4.6985ms.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[4]
      Executed ViewResult - view Index executed in 4.6985ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp) in 48.794ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.HomeController.Index (Phsom.Idp) in 48.794ms
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 66.8435ms 200 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 66.8435ms 200 text/html; charset=utf-8
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 668.1773ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 668.1773ms 200 application/json; charset=UTF-8
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (72ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (72ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (93ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (93ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 344.0724ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 344.0724ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/authorize?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=8996189199f64031936fd500eff60692&nonce=349ffa9d881f430896d62886219c8859  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/authorize?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=8996189199f64031936fd500eff60692&nonce=349ffa9d881f430896d62886219c8859  
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (32ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (32ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (29ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (29ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (31ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (31ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (38ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (38ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (43ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (43ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
infoinfo: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 305.398ms 200 application/json; charset=UTF-8
: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 305.398ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/authorize?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=653dde9c75784233a1b58c44b058f843&nonce=e8d2eefb50914ed5b30516c25855c912  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/authorize?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=653dde9c75784233a1b58c44b058f843&nonce=e8d2eefb50914ed5b30516c25855c912  
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
infoinfo: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (46ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (47ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (46ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (47ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (51ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
infoinfo: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (51ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (52ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (52ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      ValidatedAuthorizeRequest
      {
        "ClientId": "phsom-web-client",
        "ClientName": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "AllowedRedirectUris": [
          "https://localhost:4200/signin-oidc"
        ],
        "SubjectId": "anonymous",
        "ResponseType": "id_token",
        "ResponseMode": "fragment",
        "GrantType": "implicit",
        "RequestedScopes": "openid profile roles address",
        "State": "8996189199f64031936fd500eff60692",
        "Nonce": "349ffa9d881f430896d62886219c8859",
        "Raw": {
          "client_id": "phsom-web-client",
          "redirect_uri": "https://localhost:4200/signin-oidc",
          "response_type": "id_token",
          "scope": "openid profile roles address",
          "state": "8996189199f64031936fd500eff60692",
          "nonce": "349ffa9d881f430896d62886219c8859"
        }
      }
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      ValidatedAuthorizeRequest
      {
        "ClientId": "phsom-web-client",
        "ClientName": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "AllowedRedirectUris": [
          "https://localhost:4200/signin-oidc"
        ],
        "SubjectId": "anonymous",
        "ResponseType": "id_token",
        "ResponseMode": "fragment",
        "GrantType": "implicit",
        "RequestedScopes": "openid profile roles address",
        "State": "653dde9c75784233a1b58c44b058f843",
        "Nonce": "e8d2eefb50914ed5b30516c25855c912",
        "Raw": {
          "client_id": "phsom-web-client",
          "redirect_uri": "https://localhost:4200/signin-oidc",
          "response_type": "id_token",
          "scope": "openid profile roles address",
          "state": "653dde9c75784233a1b58c44b058f843",
          "nonce": "e8d2eefb50914ed5b30516c25855c912"
        }
      }
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      ValidatedAuthorizeRequest
      {
        "ClientId": "phsom-web-client",
        "ClientName": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "AllowedRedirectUris": [
          "https://localhost:4200/signin-oidc"
        ],
        "SubjectId": "anonymous",
        "ResponseType": "id_token",
        "ResponseMode": "fragment",
        "GrantType": "implicit",
        "RequestedScopes": "openid profile roles address",
        "State": "8996189199f64031936fd500eff60692",
        "Nonce": "349ffa9d881f430896d62886219c8859",
        "Raw": {
          "client_id": "phsom-web-client",
          "redirect_uri": "https://localhost:4200/signin-oidc",
          "response_type": "id_token",
          "scope": "openid profile roles address",
          "state": "8996189199f64031936fd500eff60692",
          "nonce": "349ffa9d881f430896d62886219c8859"
        }
      }
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      ValidatedAuthorizeRequest
      {
        "ClientId": "phsom-web-client",
        "ClientName": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "AllowedRedirectUris": [
          "https://localhost:4200/signin-oidc"
        ],
        "SubjectId": "anonymous",
        "ResponseType": "id_token",
        "ResponseMode": "fragment",
        "GrantType": "implicit",
        "RequestedScopes": "openid profile roles address",
        "State": "653dde9c75784233a1b58c44b058f843",
        "Nonce": "e8d2eefb50914ed5b30516c25855c912",
        "Raw": {
          "client_id": "phsom-web-client",
          "redirect_uri": "https://localhost:4200/signin-oidc",
          "response_type": "id_token",
          "scope": "openid profile roles address",
          "state": "653dde9c75784233a1b58c44b058f843",
          "nonce": "e8d2eefb50914ed5b30516c25855c912"
        }
      }
info: IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator[0]
      Showing login: User is not authenticated
info: IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator[0]
      Showing login: User is not authenticated
info: IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator[0]
      Showing login: User is not authenticated
info: IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator[0]
      Showing login: User is not authenticated
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 618.675ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1932.3532ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 618.675ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1932.3532ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dphsom-web-client%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%253A4200%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%2520roles%2520address%26state%3D8996189199f64031936fd500eff60692%26nonce%3D349ffa9d881f430896d62886219c8859  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dphsom-web-client%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%253A4200%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%2520roles%2520address%26state%3D653dde9c75784233a1b58c44b058f843%26nonce%3De8d2eefb50914ed5b30516c25855c912  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dphsom-web-client%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%253A4200%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%2520roles%2520address%26state%3D8996189199f64031936fd500eff60692%26nonce%3D349ffa9d881f430896d62886219c8859  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dphsom-web-client%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%253A4200%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%2520roles%2520address%26state%3D653dde9c75784233a1b58c44b058f843%26nonce%3De8d2eefb50914ed5b30516c25855c912  
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Login", controller = "Account"}. Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Login", controller = "Account"}. Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Login", controller = "Account"}. Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Login", controller = "Account"}. Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) with arguments (/connect/authorize/callback?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=653dde9c75784233a1b58c44b058f843&nonce=e8d2eefb50914ed5b30516c25855c912) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) with arguments (/connect/authorize/callback?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=8996189199f64031936fd500eff60692&nonce=349ffa9d881f430896d62886219c8859) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) with arguments (/connect/authorize/callback?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=653dde9c75784233a1b58c44b058f843&nonce=e8d2eefb50914ed5b30516c25855c912) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) with arguments (/connect/authorize/callback?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=8996189199f64031936fd500eff60692&nonce=349ffa9d881f430896d62886219c8859) - Validation state: Valid
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (78ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (78ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (80ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (80ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (43ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (43ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (43ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (43ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (37ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (37ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (71ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (70ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (71ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (70ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (73ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (73ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (75ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (75ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (39ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (39ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (39ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (39ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (39ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (39ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (80ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (78ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (80ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (78ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (93ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (91ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (93ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (91ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (92ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (72ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (92ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (72ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (38ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (38ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (39ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (39ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (38ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (38ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (38ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (38ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (44ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (44ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (66ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (66ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (66ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (66ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (39ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (39ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (69ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (66ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (69ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (66ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (66ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (66ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (66ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (66ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (64ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (65ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (64ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (65ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (66ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (66ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (66ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (66ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.ViewResult in 2037.2287ms.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.ViewResult in 2037.2287ms.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[1]
      Executing ViewResult, running view Login.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[1]
      Executing ViewResult, running view Login.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (37ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (37ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (53ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (53ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[4]
      Executed ViewResult - view Login executed in 107.4965ms.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[4]
      Executed ViewResult - view Login executed in 107.4965ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.ViewResult in 2152.8495ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) in 2213.5469ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.ViewResult in 2152.8495ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) in 2213.5469ms
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[1]
      Executing ViewResult, running view Login.
infoinfo: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[1]
      Executing ViewResult, running view Login.
: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2240.7257ms 200 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2240.7257ms 200 text/html; charset=utf-8
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[4]
      Executed ViewResult - view Login executed in 11.7956ms.
info: Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor[4]
      Executed ViewResult - view Login executed in 11.7956ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) in 2239.153ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) in 2239.153ms
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2258.6782ms 200 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2258.6782ms 200 text/html; charset=utf-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/lib/bootstrap/css/bootstrap.css  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/lib/bootstrap/css/bootstrap.css  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/css/site.css  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/css/site.css  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/lib/jquery/jquery.js  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/lib/jquery/jquery.js  
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/css/site.css'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\css\site.css'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/css/site.css'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\css\site.css'
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/icon.png  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/icon.png  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 56.5746ms 200 text/css
infoinfo: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 56.5746ms 200 text/css
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/icon.png'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\icon.png'
: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/icon.png'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\icon.png'
infoinfo: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/lib/bootstrap/css/bootstrap.css'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\lib\bootstrap\css\bootstrap.css'
: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/lib/bootstrap/css/bootstrap.css'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\lib\bootstrap\css\bootstrap.css'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/lib/jquery/jquery.js'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\lib\jquery\jquery.js'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/lib/jquery/jquery.js'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\lib\jquery\jquery.js'
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 51.6301ms 200 image/png
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 51.6301ms 200 image/png
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 94.9451ms 200 text/css
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 75.0237ms 200 application/javascript
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 75.0237ms 200 application/javascript
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 94.9451ms 200 text/css
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/lib/bootstrap/js/bootstrap.js  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/lib/bootstrap/js/bootstrap.js  
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/lib/bootstrap/js/bootstrap.js'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\lib\bootstrap\js\bootstrap.js'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/lib/bootstrap/js/bootstrap.js'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\lib\bootstrap\js\bootstrap.js'
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 45.4278ms 200 application/javascript
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 45.4278ms 200 application/javascript
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/lib/bootstrap/css/bootstrap.css.map  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/lib/bootstrap/css/bootstrap.css.map  
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/lib/bootstrap/css/bootstrap.css.map'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\lib\bootstrap\css\bootstrap.css.map'
info: Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware[2]
      Sending file. Request path: '/lib/bootstrap/css/bootstrap.css.map'. Physical path: 'D:\phsom\phsom-identity-server\Phsom.Idp\wwwroot\lib\bootstrap\css\bootstrap.css.map'
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 20.8565ms 200 text/plain
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 20.8565ms 200 text/plain
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 POST http://localhost:44352/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dphsom-web-client%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%253A4200%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%2520roles%2520address%26state%3D8996189199f64031936fd500eff60692%26nonce%3D349ffa9d881f430896d62886219c8859 application/x-www-form-urlencoded 556
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 POST http://localhost:44352/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dphsom-web-client%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%253A4200%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%2520roles%2520address%26state%3D8996189199f64031936fd500eff60692%26nonce%3D349ffa9d881f430896d62886219c8859 application/x-www-form-urlencoded 556
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Login", controller = "Account"}. Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Login", controller = "Account"}. Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) with arguments (IdentityServer4.Quickstart.UI.LoginInputModel, login) - Validation state: Valid
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Executing action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) with arguments (IdentityServer4.Quickstart.UI.LoginInputModel, login) - Validation state: Valid
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (39ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (39ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (38ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
      FROM [AspNetUsers] AS [u]
      WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (38ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
      FROM [AspNetUsers] AS [u]
      WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (41ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
      FROM [AspNetUserClaims] AS [uc]
      WHERE [uc].[UserId] = @__user_Id_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (41ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
      FROM [AspNetUserClaims] AS [uc]
      WHERE [uc].[UserId] = @__user_Id_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [role].[Name]
      FROM [AspNetUserRoles] AS [userRole]
      INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
      WHERE [userRole].[UserId] = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [role].[Name]
      FROM [AspNetUserRoles] AS [userRole]
      INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
      WHERE [userRole].[UserId] = @__userId_0
info: Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler[10]
      AuthenticationScheme: Identity.Application signed in.
info: Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler[10]
      AuthenticationScheme: Identity.Application signed in.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (44ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
      FROM [AspNetUsers] AS [u]
      WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (44ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
      FROM [AspNetUsers] AS [u]
      WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
info: Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler[10]
      AuthenticationScheme: Identity.Application signed in.
info: Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler[10]
      AuthenticationScheme: Identity.Application signed in.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (34ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (34ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (36ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (34ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (34ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (34ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (34ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 1245.7449ms.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action method IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp), returned result Microsoft.AspNetCore.Mvc.RedirectResult in 1245.7449ms.
info: Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor[1]
      Executing RedirectResult, redirecting to /connect/authorize/callback?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=8996189199f64031936fd500eff60692&nonce=349ffa9d881f430896d62886219c8859.
info: Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor[1]
      Executing RedirectResult, redirecting to /connect/authorize/callback?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=8996189199f64031936fd500eff60692&nonce=349ffa9d881f430896d62886219c8859.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) in 1284.3071ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) in 1284.3071ms
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1301.771ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1301.771ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/authorize/callback?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=8996189199f64031936fd500eff60692&nonce=349ffa9d881f430896d62886219c8859  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/authorize/callback?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=8996189199f64031936fd500eff60692&nonce=349ffa9d881f430896d62886219c8859  
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint[0]
      ValidatedAuthorizeRequest
      {
        "ClientId": "phsom-web-client",
        "ClientName": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "AllowedRedirectUris": [
          "https://localhost:4200/signin-oidc"
        ],
        "SubjectId": "2",
        "ResponseType": "id_token",
        "ResponseMode": "fragment",
        "GrantType": "implicit",
        "RequestedScopes": "openid profile roles address",
        "State": "8996189199f64031936fd500eff60692",
        "Nonce": "349ffa9d881f430896d62886219c8859",
        "SessionId": "c8d0d2b7e7521c2fedd6b4b923319879",
        "Raw": {
          "client_id": "phsom-web-client",
          "redirect_uri": "https://localhost:4200/signin-oidc",
          "response_type": "id_token",
          "scope": "openid profile roles address",
          "state": "8996189199f64031936fd500eff60692",
          "nonce": "349ffa9d881f430896d62886219c8859"
        }
      }
info: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint[0]
      ValidatedAuthorizeRequest
      {
        "ClientId": "phsom-web-client",
        "ClientName": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "AllowedRedirectUris": [
          "https://localhost:4200/signin-oidc"
        ],
        "SubjectId": "2",
        "ResponseType": "id_token",
        "ResponseMode": "fragment",
        "GrantType": "implicit",
        "RequestedScopes": "openid profile roles address",
        "State": "8996189199f64031936fd500eff60692",
        "Nonce": "349ffa9d881f430896d62886219c8859",
        "SessionId": "c8d0d2b7e7521c2fedd6b4b923319879",
        "Raw": {
          "client_id": "phsom-web-client",
          "redirect_uri": "https://localhost:4200/signin-oidc",
          "response_type": "id_token",
          "scope": "openid profile roles address",
          "state": "8996189199f64031936fd500eff60692",
          "nonce": "349ffa9d881f430896d62886219c8859"
        }
      }
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[@__get_Item_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
      FROM [AspNetUsers] AS [e]
      WHERE [e].[Id] = @__get_Item_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[@__get_Item_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
      FROM [AspNetUsers] AS [e]
      WHERE [e].[Id] = @__get_Item_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (52ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
      FROM [AspNetUserClaims] AS [uc]
      WHERE [uc].[UserId] = @__user_Id_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (52ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
      FROM [AspNetUserClaims] AS [uc]
      WHERE [uc].[UserId] = @__user_Id_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [role].[Name]
      FROM [AspNetUserRoles] AS [userRole]
      INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
      WHERE [userRole].[UserId] = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [role].[Name]
      FROM [AspNetUserRoles] AS [userRole]
      INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
      WHERE [userRole].[UserId] = @__userId_0
info: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint[0]
      Authorize endpoint response
      {
        "SubjectId": "2",
        "ClientId": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "State": "8996189199f64031936fd500eff60692",
        "Scope": "openid profile roles address"
      }
info: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint[0]
      Authorize endpoint response
      {
        "SubjectId": "2",
        "ClientId": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "State": "8996189199f64031936fd500eff60692",
        "Scope": "openid profile roles address"
      }
info: Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler[10]
      AuthenticationScheme: Identity.Application signed in.
info: Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler[10]
      AuthenticationScheme: Identity.Application signed in.
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2619.0498ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2619.0498ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 256.332ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 256.332ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration/jwks  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration/jwks  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 57.9789ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 57.9789ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 26.5549ms 200 text/html; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 26.5549ms 200 text/html; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 275.6866ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 275.6866ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
infoinfo: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 41.3783ms 200 text/html; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 41.3783ms 200 text/html; charset=UTF-8
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 340.2543ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 340.2543ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/authorize?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=fa9604806ea44034a4bf91e1c4f126aa&nonce=898b96a48eff424fa930635e19ad3c62  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/authorize?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=fa9604806ea44034a4bf91e1c4f126aa&nonce=898b96a48eff424fa930635e19ad3c62  
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (27ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (27ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      ValidatedAuthorizeRequest
      {
        "ClientId": "phsom-web-client",
        "ClientName": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "AllowedRedirectUris": [
          "https://localhost:4200/signin-oidc"
        ],
        "SubjectId": "2",
        "ResponseType": "id_token",
        "ResponseMode": "fragment",
        "GrantType": "implicit",
        "RequestedScopes": "openid profile roles address",
        "State": "fa9604806ea44034a4bf91e1c4f126aa",
        "Nonce": "898b96a48eff424fa930635e19ad3c62",
        "SessionId": "c8d0d2b7e7521c2fedd6b4b923319879",
        "Raw": {
          "client_id": "phsom-web-client",
          "redirect_uri": "https://localhost:4200/signin-oidc",
          "response_type": "id_token",
          "scope": "openid profile roles address",
          "state": "fa9604806ea44034a4bf91e1c4f126aa",
          "nonce": "898b96a48eff424fa930635e19ad3c62"
        }
      }
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      ValidatedAuthorizeRequest
      {
        "ClientId": "phsom-web-client",
        "ClientName": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "AllowedRedirectUris": [
          "https://localhost:4200/signin-oidc"
        ],
        "SubjectId": "2",
        "ResponseType": "id_token",
        "ResponseMode": "fragment",
        "GrantType": "implicit",
        "RequestedScopes": "openid profile roles address",
        "State": "fa9604806ea44034a4bf91e1c4f126aa",
        "Nonce": "898b96a48eff424fa930635e19ad3c62",
        "SessionId": "c8d0d2b7e7521c2fedd6b4b923319879",
        "Raw": {
          "client_id": "phsom-web-client",
          "redirect_uri": "https://localhost:4200/signin-oidc",
          "response_type": "id_token",
          "scope": "openid profile roles address",
          "state": "fa9604806ea44034a4bf91e1c4f126aa",
          "nonce": "898b96a48eff424fa930635e19ad3c62"
        }
      }
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[@__get_Item_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
      FROM [AspNetUsers] AS [e]
      WHERE [e].[Id] = @__get_Item_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[@__get_Item_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
      FROM [AspNetUsers] AS [e]
      WHERE [e].[Id] = @__get_Item_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (42ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
      FROM [AspNetUserClaims] AS [uc]
      WHERE [uc].[UserId] = @__user_Id_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (42ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
      FROM [AspNetUserClaims] AS [uc]
      WHERE [uc].[UserId] = @__user_Id_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (32ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [role].[Name]
      FROM [AspNetUserRoles] AS [userRole]
      INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
      WHERE [userRole].[UserId] = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (32ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [role].[Name]
      FROM [AspNetUserRoles] AS [userRole]
      INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
      WHERE [userRole].[UserId] = @__userId_0
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      Authorize endpoint response
      {
        "SubjectId": "2",
        "ClientId": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "State": "fa9604806ea44034a4bf91e1c4f126aa",
        "Scope": "openid profile roles address"
      }
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      Authorize endpoint response
      {
        "SubjectId": "2",
        "ClientId": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "State": "fa9604806ea44034a4bf91e1c4f126aa",
        "Scope": "openid profile roles address"
      }
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 594.8336ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 594.8336ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
infoinfo: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 305.9619ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 305.9619ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 18.326ms 200 text/html; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 18.326ms 200 text/html; charset=UTF-8
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 262.3175ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 262.3175ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration/jwks  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration/jwks  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 43.8656ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 43.8656ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 310.0058ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 310.0058ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 19.4504ms 200 text/html; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 19.4504ms 200 text/html; charset=UTF-8
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 259.9929ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 259.9929ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/authorize?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=2ce2da53b471460cbfe9519f15b85ee7&nonce=c677a86425de4eddbe26ea4d248c4e17  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/authorize?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=2ce2da53b471460cbfe9519f15b85ee7&nonce=c677a86425de4eddbe26ea4d248c4e17  
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (27ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (27ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      ValidatedAuthorizeRequest
      {
        "ClientId": "phsom-web-client",
        "ClientName": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "AllowedRedirectUris": [
          "https://localhost:4200/signin-oidc"
        ],
        "SubjectId": "2",
        "ResponseType": "id_token",
        "ResponseMode": "fragment",
        "GrantType": "implicit",
        "RequestedScopes": "openid profile roles address",
        "State": "2ce2da53b471460cbfe9519f15b85ee7",
        "Nonce": "c677a86425de4eddbe26ea4d248c4e17",
        "SessionId": "c8d0d2b7e7521c2fedd6b4b923319879",
        "Raw": {
          "client_id": "phsom-web-client",
          "redirect_uri": "https://localhost:4200/signin-oidc",
          "response_type": "id_token",
          "scope": "openid profile roles address",
          "state": "2ce2da53b471460cbfe9519f15b85ee7",
          "nonce": "c677a86425de4eddbe26ea4d248c4e17"
        }
      }
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      ValidatedAuthorizeRequest
      {
        "ClientId": "phsom-web-client",
        "ClientName": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "AllowedRedirectUris": [
          "https://localhost:4200/signin-oidc"
        ],
        "SubjectId": "2",
        "ResponseType": "id_token",
        "ResponseMode": "fragment",
        "GrantType": "implicit",
        "RequestedScopes": "openid profile roles address",
        "State": "2ce2da53b471460cbfe9519f15b85ee7",
        "Nonce": "c677a86425de4eddbe26ea4d248c4e17",
        "SessionId": "c8d0d2b7e7521c2fedd6b4b923319879",
        "Raw": {
          "client_id": "phsom-web-client",
          "redirect_uri": "https://localhost:4200/signin-oidc",
          "response_type": "id_token",
          "scope": "openid profile roles address",
          "state": "2ce2da53b471460cbfe9519f15b85ee7",
          "nonce": "c677a86425de4eddbe26ea4d248c4e17"
        }
      }
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (32ms) [Parameters=[@__get_Item_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
      FROM [AspNetUsers] AS [e]
      WHERE [e].[Id] = @__get_Item_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (32ms) [Parameters=[@__get_Item_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
      FROM [AspNetUsers] AS [e]
      WHERE [e].[Id] = @__get_Item_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (44ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
      FROM [AspNetUserClaims] AS [uc]
      WHERE [uc].[UserId] = @__user_Id_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (44ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
      FROM [AspNetUserClaims] AS [uc]
      WHERE [uc].[UserId] = @__user_Id_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (32ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [role].[Name]
      FROM [AspNetUserRoles] AS [userRole]
      INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
      WHERE [userRole].[UserId] = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (32ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [role].[Name]
      FROM [AspNetUserRoles] AS [userRole]
      INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
      WHERE [userRole].[UserId] = @__userId_0
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      Authorize endpoint response
      {
        "SubjectId": "2",
        "ClientId": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "State": "2ce2da53b471460cbfe9519f15b85ee7",
        "Scope": "openid profile roles address"
      }
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      Authorize endpoint response
      {
        "SubjectId": "2",
        "ClientId": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "State": "2ce2da53b471460cbfe9519f15b85ee7",
        "Scope": "openid profile roles address"
      }
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 616.377ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 616.377ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 277.8851ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 277.8851ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 39.0295ms 200 text/html; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 39.0295ms 200 text/html; charset=UTF-8
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (40ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (40ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 272.4484ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 272.4484ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration/jwks  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration/jwks  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 43.2081ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 43.2081ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 291.4631ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 291.4631ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 23.9168ms 200 text/html; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 23.9168ms 200 text/html; charset=UTF-8
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 289.6644ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 289.6644ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/authorize?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=3d7c709e3fa14302826a5fea35eadb05&nonce=8b4cc8b7f18b49eca19edaed1ea4f0de  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/authorize?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=3d7c709e3fa14302826a5fea35eadb05&nonce=8b4cc8b7f18b49eca19edaed1ea4f0de  
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      ValidatedAuthorizeRequest
      {
        "ClientId": "phsom-web-client",
        "ClientName": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "AllowedRedirectUris": [
          "https://localhost:4200/signin-oidc"
        ],
        "SubjectId": "2",
        "ResponseType": "id_token",
        "ResponseMode": "fragment",
        "GrantType": "implicit",
        "RequestedScopes": "openid profile roles address",
        "State": "3d7c709e3fa14302826a5fea35eadb05",
        "Nonce": "8b4cc8b7f18b49eca19edaed1ea4f0de",
        "SessionId": "c8d0d2b7e7521c2fedd6b4b923319879",
        "Raw": {
          "client_id": "phsom-web-client",
          "redirect_uri": "https://localhost:4200/signin-oidc",
          "response_type": "id_token",
          "scope": "openid profile roles address",
          "state": "3d7c709e3fa14302826a5fea35eadb05",
          "nonce": "8b4cc8b7f18b49eca19edaed1ea4f0de"
        }
      }
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      ValidatedAuthorizeRequest
      {
        "ClientId": "phsom-web-client",
        "ClientName": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "AllowedRedirectUris": [
          "https://localhost:4200/signin-oidc"
        ],
        "SubjectId": "2",
        "ResponseType": "id_token",
        "ResponseMode": "fragment",
        "GrantType": "implicit",
        "RequestedScopes": "openid profile roles address",
        "State": "3d7c709e3fa14302826a5fea35eadb05",
        "Nonce": "8b4cc8b7f18b49eca19edaed1ea4f0de",
        "SessionId": "c8d0d2b7e7521c2fedd6b4b923319879",
        "Raw": {
          "client_id": "phsom-web-client",
          "redirect_uri": "https://localhost:4200/signin-oidc",
          "response_type": "id_token",
          "scope": "openid profile roles address",
          "state": "3d7c709e3fa14302826a5fea35eadb05",
          "nonce": "8b4cc8b7f18b49eca19edaed1ea4f0de"
        }
      }
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[@__get_Item_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
      FROM [AspNetUsers] AS [e]
      WHERE [e].[Id] = @__get_Item_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[@__get_Item_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
      FROM [AspNetUsers] AS [e]
      WHERE [e].[Id] = @__get_Item_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (43ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
      FROM [AspNetUserClaims] AS [uc]
      WHERE [uc].[UserId] = @__user_Id_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (43ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
      FROM [AspNetUserClaims] AS [uc]
      WHERE [uc].[UserId] = @__user_Id_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [role].[Name]
      FROM [AspNetUserRoles] AS [userRole]
      INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
      WHERE [userRole].[UserId] = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [role].[Name]
      FROM [AspNetUserRoles] AS [userRole]
      INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
      WHERE [userRole].[UserId] = @__userId_0
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      Authorize endpoint response
      {
        "SubjectId": "2",
        "ClientId": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "State": "3d7c709e3fa14302826a5fea35eadb05",
        "Scope": "openid profile roles address"
      }
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      Authorize endpoint response
      {
        "SubjectId": "2",
        "ClientId": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "State": "3d7c709e3fa14302826a5fea35eadb05",
        "Scope": "openid profile roles address"
      }
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 604.4206ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 604.4206ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (53ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (53ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 341.1289ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 341.1289ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
infoinfo: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 31.9801ms 200 text/html; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 31.9801ms 200 text/html; charset=UTF-8
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 262.4787ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 262.4787ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration/jwks  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration/jwks  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 41.7421ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 41.7421ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 302.9766ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 302.9766ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 34.9062ms 200 text/html; charset=UTF-8
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 34.9062ms 200 text/html; charset=UTF-8
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 261.846ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 261.846ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/authorize?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=e0c388bff9c64cfcad56d4c4115ab075&nonce=5697498f3185425ab3f78dc9c8e23011  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/authorize?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=e0c388bff9c64cfcad56d4c4115ab075&nonce=5697498f3185425ab3f78dc9c8e23011  
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      ValidatedAuthorizeRequest
      {
        "ClientId": "phsom-web-client",
        "ClientName": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "AllowedRedirectUris": [
          "https://localhost:4200/signin-oidc"
        ],
        "SubjectId": "2",
        "ResponseType": "id_token",
        "ResponseMode": "fragment",
        "GrantType": "implicit",
        "RequestedScopes": "openid profile roles address",
        "State": "e0c388bff9c64cfcad56d4c4115ab075",
        "Nonce": "5697498f3185425ab3f78dc9c8e23011",
        "SessionId": "c8d0d2b7e7521c2fedd6b4b923319879",
        "Raw": {
          "client_id": "phsom-web-client",
          "redirect_uri": "https://localhost:4200/signin-oidc",
          "response_type": "id_token",
          "scope": "openid profile roles address",
          "state": "e0c388bff9c64cfcad56d4c4115ab075",
          "nonce": "5697498f3185425ab3f78dc9c8e23011"
        }
      }
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      ValidatedAuthorizeRequest
      {
        "ClientId": "phsom-web-client",
        "ClientName": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "AllowedRedirectUris": [
          "https://localhost:4200/signin-oidc"
        ],
        "SubjectId": "2",
        "ResponseType": "id_token",
        "ResponseMode": "fragment",
        "GrantType": "implicit",
        "RequestedScopes": "openid profile roles address",
        "State": "e0c388bff9c64cfcad56d4c4115ab075",
        "Nonce": "5697498f3185425ab3f78dc9c8e23011",
        "SessionId": "c8d0d2b7e7521c2fedd6b4b923319879",
        "Raw": {
          "client_id": "phsom-web-client",
          "redirect_uri": "https://localhost:4200/signin-oidc",
          "response_type": "id_token",
          "scope": "openid profile roles address",
          "state": "e0c388bff9c64cfcad56d4c4115ab075",
          "nonce": "5697498f3185425ab3f78dc9c8e23011"
        }
      }
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[@__get_Item_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
      FROM [AspNetUsers] AS [e]
      WHERE [e].[Id] = @__get_Item_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[@__get_Item_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
      FROM [AspNetUsers] AS [e]
      WHERE [e].[Id] = @__get_Item_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (43ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
      FROM [AspNetUserClaims] AS [uc]
      WHERE [uc].[UserId] = @__user_Id_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (43ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
      FROM [AspNetUserClaims] AS [uc]
      WHERE [uc].[UserId] = @__user_Id_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [role].[Name]
      FROM [AspNetUserRoles] AS [userRole]
      INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
      WHERE [userRole].[UserId] = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [role].[Name]
      FROM [AspNetUserRoles] AS [userRole]
      INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
      WHERE [userRole].[UserId] = @__userId_0
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      Authorize endpoint response
      {
        "SubjectId": "2",
        "ClientId": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "State": "e0c388bff9c64cfcad56d4c4115ab075",
        "Scope": "openid profile roles address"
      }
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      Authorize endpoint response
      {
        "SubjectId": "2",
        "ClientId": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "State": "e0c388bff9c64cfcad56d4c4115ab075",
        "Scope": "openid profile roles address"
      }
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 618.389ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 618.389ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 324.4872ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 324.4872ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
infoinfo: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 36.4256ms 200 text/html; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 36.4256ms 200 text/html; charset=UTF-8
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 263.2929ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 263.2929ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration/jwks  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration/jwks  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 42.8601ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 42.8601ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 282.3489ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 282.3489ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 19.651ms 200 text/html; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 19.651ms 200 text/html; charset=UTF-8
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 273.8307ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 273.8307ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/authorize?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=d35b2766e1bd4e56b32207d479e1a5fc&nonce=ad29bf761b8e4a99bb4ecbc9f0d920bc  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/authorize?client_id=phsom-web-client&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fsignin-oidc&response_type=id_token&scope=openid%20profile%20roles%20address&state=d35b2766e1bd4e56b32207d479e1a5fc&nonce=ad29bf761b8e4a99bb4ecbc9f0d920bc  
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[BackChannelLogoutSessionRequired], [x].[BackChannelLogoutUri], [x].[ClientClaimsPrefix], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[ConsentLifetime], [x].[Description], [x].[EnableLocalLogin], [x].[Enabled], [x].[FrontChannelLogoutSessionRequired], [x].[FrontChannelLogoutUri], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[PairWiseSubjectSalt], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
      FROM [Clients] AS [x]
      WHERE [x].[ClientId] = @__clientId_0
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedGrantTypes].[Id], [x.AllowedGrantTypes].[ClientId], [x.AllowedGrantTypes].[GrantType]
      FROM [ClientGrantTypes] AS [x.AllowedGrantTypes]
      INNER JOIN (
          SELECT TOP(1) [x0].[Id]
          FROM [Clients] AS [x0]
          WHERE [x0].[ClientId] = @__clientId_0
          ORDER BY [x0].[Id]
      ) AS [t] ON [x.AllowedGrantTypes].[ClientId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.RedirectUris].[Id], [x.RedirectUris].[ClientId], [x.RedirectUris].[RedirectUri]
      FROM [ClientRedirectUris] AS [x.RedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x1].[Id]
          FROM [Clients] AS [x1]
          WHERE [x1].[ClientId] = @__clientId_0
          ORDER BY [x1].[Id]
      ) AS [t0] ON [x.RedirectUris].[ClientId] = [t0].[Id]
      ORDER BY [t0].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.PostLogoutRedirectUris].[Id], [x.PostLogoutRedirectUris].[ClientId], [x.PostLogoutRedirectUris].[PostLogoutRedirectUri]
      FROM [ClientPostLogoutRedirectUris] AS [x.PostLogoutRedirectUris]
      INNER JOIN (
          SELECT TOP(1) [x2].[Id]
          FROM [Clients] AS [x2]
          WHERE [x2].[ClientId] = @__clientId_0
          ORDER BY [x2].[Id]
      ) AS [t1] ON [x.PostLogoutRedirectUris].[ClientId] = [t1].[Id]
      ORDER BY [t1].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedScopes].[Id], [x.AllowedScopes].[ClientId], [x.AllowedScopes].[Scope]
      FROM [ClientScopes] AS [x.AllowedScopes]
      INNER JOIN (
          SELECT TOP(1) [x3].[Id]
          FROM [Clients] AS [x3]
          WHERE [x3].[ClientId] = @__clientId_0
          ORDER BY [x3].[Id]
      ) AS [t2] ON [x.AllowedScopes].[ClientId] = [t2].[Id]
      ORDER BY [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.ClientSecrets].[Id], [x.ClientSecrets].[ClientId], [x.ClientSecrets].[Description], [x.ClientSecrets].[Expiration], [x.ClientSecrets].[Type], [x.ClientSecrets].[Value]
      FROM [ClientSecrets] AS [x.ClientSecrets]
      INNER JOIN (
          SELECT TOP(1) [x4].[Id]
          FROM [Clients] AS [x4]
          WHERE [x4].[ClientId] = @__clientId_0
          ORDER BY [x4].[Id]
      ) AS [t3] ON [x.ClientSecrets].[ClientId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Claims].[Id], [x.Claims].[ClientId], [x.Claims].[Type], [x.Claims].[Value]
      FROM [ClientClaims] AS [x.Claims]
      INNER JOIN (
          SELECT TOP(1) [x5].[Id]
          FROM [Clients] AS [x5]
          WHERE [x5].[ClientId] = @__clientId_0
          ORDER BY [x5].[Id]
      ) AS [t4] ON [x.Claims].[ClientId] = [t4].[Id]
      ORDER BY [t4].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.IdentityProviderRestrictions].[Id], [x.IdentityProviderRestrictions].[ClientId], [x.IdentityProviderRestrictions].[Provider]
      FROM [ClientIdPRestrictions] AS [x.IdentityProviderRestrictions]
      INNER JOIN (
          SELECT TOP(1) [x6].[Id]
          FROM [Clients] AS [x6]
          WHERE [x6].[ClientId] = @__clientId_0
          ORDER BY [x6].[Id]
      ) AS [t5] ON [x.IdentityProviderRestrictions].[ClientId] = [t5].[Id]
      ORDER BY [t5].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Id], [x.AllowedCorsOrigins].[ClientId], [x.AllowedCorsOrigins].[Origin]
      FROM [ClientCorsOrigins] AS [x.AllowedCorsOrigins]
      INNER JOIN (
          SELECT TOP(1) [x7].[Id]
          FROM [Clients] AS [x7]
          WHERE [x7].[ClientId] = @__clientId_0
          ORDER BY [x7].[Id]
      ) AS [t6] ON [x.AllowedCorsOrigins].[ClientId] = [t6].[Id]
      ORDER BY [t6].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
      SELECT [x.Properties].[Id], [x.Properties].[ClientId], [x.Properties].[Key], [x.Properties].[Value]
      FROM [ClientProperties] AS [x.Properties]
      INNER JOIN (
          SELECT TOP(1) [x8].[Id]
          FROM [Clients] AS [x8]
          WHERE [x8].[ClientId] = @__clientId_0
          ORDER BY [x8].[Id]
      ) AS [t7] ON [x.Properties].[ClientId] = [t7].[Id]
      ORDER BY [t7].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [identityResource]
      WHERE [identityResource].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ORDER BY [identityResource].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [identityResource.UserClaims].[Id], [identityResource.UserClaims].[IdentityResourceId], [identityResource.UserClaims].[Type]
      FROM [IdentityClaims] AS [identityResource.UserClaims]
      INNER JOIN (
          SELECT [identityResource0].[Id]
          FROM [IdentityResources] AS [identityResource0]
          WHERE [identityResource0].[Name] IN (N'openid', N'profile', N'roles', N'address')
      ) AS [t] ON [identityResource.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
      FROM [ApiResources] AS [api]
      WHERE EXISTS (
          SELECT 1
          FROM [ApiScopes] AS [x]
          WHERE [x].[Name] IN (N'openid', N'profile', N'roles', N'address') AND ([api].[Id] = [x].[ApiResourceId]))
      ORDER BY [api].[Id]
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      ValidatedAuthorizeRequest
      {
        "ClientId": "phsom-web-client",
        "ClientName": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "AllowedRedirectUris": [
          "https://localhost:4200/signin-oidc"
        ],
        "SubjectId": "2",
        "ResponseType": "id_token",
        "ResponseMode": "fragment",
        "GrantType": "implicit",
        "RequestedScopes": "openid profile roles address",
        "State": "d35b2766e1bd4e56b32207d479e1a5fc",
        "Nonce": "ad29bf761b8e4a99bb4ecbc9f0d920bc",
        "SessionId": "c8d0d2b7e7521c2fedd6b4b923319879",
        "Raw": {
          "client_id": "phsom-web-client",
          "redirect_uri": "https://localhost:4200/signin-oidc",
          "response_type": "id_token",
          "scope": "openid profile roles address",
          "state": "d35b2766e1bd4e56b32207d479e1a5fc",
          "nonce": "ad29bf761b8e4a99bb4ecbc9f0d920bc"
        }
      }
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      ValidatedAuthorizeRequest
      {
        "ClientId": "phsom-web-client",
        "ClientName": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "AllowedRedirectUris": [
          "https://localhost:4200/signin-oidc"
        ],
        "SubjectId": "2",
        "ResponseType": "id_token",
        "ResponseMode": "fragment",
        "GrantType": "implicit",
        "RequestedScopes": "openid profile roles address",
        "State": "d35b2766e1bd4e56b32207d479e1a5fc",
        "Nonce": "ad29bf761b8e4a99bb4ecbc9f0d920bc",
        "SessionId": "c8d0d2b7e7521c2fedd6b4b923319879",
        "Raw": {
          "client_id": "phsom-web-client",
          "redirect_uri": "https://localhost:4200/signin-oidc",
          "response_type": "id_token",
          "scope": "openid profile roles address",
          "state": "d35b2766e1bd4e56b32207d479e1a5fc",
          "nonce": "ad29bf761b8e4a99bb4ecbc9f0d920bc"
        }
      }
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: using lazy-loading proxies MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (27ms) [Parameters=[@__get_Item_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
      FROM [AspNetUsers] AS [e]
      WHERE [e].[Id] = @__get_Item_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (27ms) [Parameters=[@__get_Item_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
      FROM [AspNetUsers] AS [e]
      WHERE [e].[Id] = @__get_Item_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (65ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
      FROM [AspNetUserClaims] AS [uc]
      WHERE [uc].[UserId] = @__user_Id_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (65ms) [Parameters=[@__user_Id_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
      FROM [AspNetUserClaims] AS [uc]
      WHERE [uc].[UserId] = @__user_Id_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [role].[Name]
      FROM [AspNetUserRoles] AS [userRole]
      INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
      WHERE [userRole].[UserId] = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='Text', CommandTimeout='30']
      SELECT [role].[Name]
      FROM [AspNetUserRoles] AS [userRole]
      INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
      WHERE [userRole].[UserId] = @__userId_0
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      Authorize endpoint response
      {
        "SubjectId": "2",
        "ClientId": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "State": "d35b2766e1bd4e56b32207d479e1a5fc",
        "Scope": "openid profile roles address"
      }
info: IdentityServer4.Endpoints.AuthorizeEndpoint[0]
      Authorize endpoint response
      {
        "SubjectId": "2",
        "ClientId": "phsom-web-client",
        "RedirectUri": "https://localhost:4200/signin-oidc",
        "State": "d35b2766e1bd4e56b32207d479e1a5fc",
        "Scope": "openid profile roles address"
      }
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 621.6335ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 621.6335ms 302 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warninfo: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (26ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT TOP(@__p_0) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
      FROM [PersistedGrants] AS [x]
      WHERE [x].[Expiration] < GETUTCDATE()
      ORDER BY [x].[Key]
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
infoinfo: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
: IdentityServer4.EntityFramework.TokenCleanup[0]
      Clearing 0 tokens
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 337.5849ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 337.5849ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/.well-known/openid-configuration  
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.EntityFrameworkCore.Infrastructure[10403]
      Entity Framework Core 2.1.4-rtm-31024 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=Phsom.Idp 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://localhost:44352/connect/checksession  
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.AllowedCorsOrigins].[Origin]
      FROM [Clients] AS [x]
      INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 38.0771ms 200 text/html; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 38.0771ms 200 text/html; charset=UTF-8
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
warn: IdentityServer4.Hosting.CorsPolicyProvider[0]
      CorsPolicyService did not allow origin: https://localhost:4200
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: IdentityServer4.Hosting.IdentityServerMiddleware[0]
      Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (47ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (47ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Emphasize], [x].[Enabled], [x].[Name], [x].[Required], [x].[ShowInDiscoveryDocument]
      FROM [IdentityResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[IdentityResourceId], [x.UserClaims].[Type]
      FROM [IdentityClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [IdentityResources] AS [x0]
      ) AS [t] ON [x.UserClaims].[IdentityResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x].[Id], [x].[Description], [x].[DisplayName], [x].[Enabled], [x].[Name]
      FROM [ApiResources] AS [x]
      ORDER BY [x].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Secrets].[Id], [x.Secrets].[ApiResourceId], [x.Secrets].[Description], [x.Secrets].[Expiration], [x.Secrets].[Type], [x.Secrets].[Value]
      FROM [ApiSecrets] AS [x.Secrets]
      INNER JOIN (
          SELECT [x0].[Id]
          FROM [ApiResources] AS [x0]
      ) AS [t] ON [x.Secrets].[ApiResourceId] = [t].[Id]
      ORDER BY [t].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes].[Id], [x.Scopes].[ApiResourceId], [x.Scopes].[Description], [x.Scopes].[DisplayName], [x.Scopes].[Emphasize], [x.Scopes].[Name], [x.Scopes].[Required], [x.Scopes].[ShowInDiscoveryDocument]
      FROM [ApiScopes] AS [x.Scopes]
      INNER JOIN (
          SELECT [x1].[Id]
          FROM [ApiResources] AS [x1]
      ) AS [t0] ON [x.Scopes].[ApiResourceId] = [t0].[Id]
      ORDER BY [t0].[Id], [x.Scopes].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.Scopes.UserClaims].[Id], [x.Scopes.UserClaims].[ApiScopeId], [x.Scopes.UserClaims].[Type]
      FROM [ApiScopeClaims] AS [x.Scopes.UserClaims]
      INNER JOIN (
          SELECT DISTINCT [x.Scopes0].[Id], [t1].[Id] AS [Id0]
          FROM [ApiScopes] AS [x.Scopes0]
          INNER JOIN (
              SELECT [x2].[Id]
              FROM [ApiResources] AS [x2]
          ) AS [t1] ON [x.Scopes0].[ApiResourceId] = [t1].[Id]
      ) AS [t2] ON [x.Scopes.UserClaims].[ApiScopeId] = [t2].[Id]
      ORDER BY [t2].[Id0], [t2].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT [x.UserClaims].[Id], [x.UserClaims].[ApiResourceId], [x.UserClaims].[Type]
      FROM [ApiClaims] AS [x.UserClaims]
      INNER JOIN (
          SELECT [x3].[Id]
          FROM [ApiResources] AS [x3]
      ) AS [t3] ON [x.UserClaims].[ApiResourceId] = [t3].[Id]
      ORDER BY [t3].[Id]
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 406.281ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 406.281ms 200 application/json; charset=UTF-8
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 POST http://localhost:44352/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dphsom-web-client%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%253A4200%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%2520roles%2520address%26state%3D653dde9c75784233a1b58c44b058f843%26nonce%3De8d2eefb50914ed5b30516c25855c912 application/x-www-form-urlencoded 556
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 POST http://localhost:44352/account/login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Dphsom-web-client%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%253A4200%252Fsignin-oidc%26response_type%3Did_token%26scope%3Dopenid%2520profile%2520roles%2520address%26state%3D653dde9c75784233a1b58c44b058f843%26nonce%3De8d2eefb50914ed5b30516c25855c912 application/x-www-form-urlencoded 556
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Cors.Infrastructure.CorsService[4]
      Policy execution successful.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Login", controller = "Account"}. Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[1]
      Route matched with {action = "Login", controller = "Account"}. Executing action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp)
info: Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ValidateAntiforgeryTokenAuthorizationFilter[1]
      Antiforgery token validation failed. The antiforgery cookie token and request token do not match.
Microsoft.AspNetCore.Antiforgery.AntiforgeryValidationException: The antiforgery cookie token and request token do not match.
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgery.ValidateTokens(HttpContext httpContext, AntiforgeryTokenSet antiforgeryTokenSet)
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgery.ValidateRequestAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ValidateAntiforgeryTokenAuthorizationFilter.OnAuthorizationAsync(AuthorizationFilterContext context)
info: Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ValidateAntiforgeryTokenAuthorizationFilter[1]
      Antiforgery token validation failed. The antiforgery cookie token and request token do not match.
Microsoft.AspNetCore.Antiforgery.AntiforgeryValidationException: The antiforgery cookie token and request token do not match.
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgery.ValidateTokens(HttpContext httpContext, AntiforgeryTokenSet antiforgeryTokenSet)
   at Microsoft.AspNetCore.Antiforgery.Internal.DefaultAntiforgery.ValidateRequestAsync(HttpContext httpContext)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ValidateAntiforgeryTokenAuthorizationFilter.OnAuthorizationAsync(AuthorizationFilterContext context)
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[3]
      Authorization failed for the request at filter 'Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ValidateAntiforgeryTokenAuthorizationFilter'.
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[3]
      Authorization failed for the request at filter 'Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ValidateAntiforgeryTokenAuthorizationFilter'.
info: Microsoft.AspNetCore.Mvc.StatusCodeResult[1]
      Executing HttpStatusCodeResult, setting HTTP status code 400
info: Microsoft.AspNetCore.Mvc.StatusCodeResult[1]
      Executing HttpStatusCodeResult, setting HTTP status code 400
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) in 108.8012ms
info: Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker[2]
      Executed action IdentityServer4.Quickstart.UI.AccountController.Login (Phsom.Idp) in 108.8012ms
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 129.7465ms 400 
info: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 129.7465ms 400 




















































































































































